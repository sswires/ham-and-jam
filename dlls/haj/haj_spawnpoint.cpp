
// haj_spawnpoint.cpp

/////////////////////////////////////////////////////////////////////////////
// includes
#include "cbase.h"
#include "haj_spawnpoint.h"

// memdbgon must be the last include file in a .cpp file!!!
#include "tier0/memdbgon.h"

/////////////////////////////////////////////////////////////////////////////
// defines
#define SF_START_DISABLED		(1 << 0)

/////////////////////////////////////////////////////////////////////////////
LINK_ENTITY_TO_CLASS(info_player_axis, CHajSpawnPoint);
LINK_ENTITY_TO_CLASS(info_player_commonwealth, CHajSpawnPoint);

/////////////////////////////////////////////////////////////////////////////
BEGIN_DATADESC(CHajSpawnPoint)
	// input functions
	DEFINE_INPUTFUNC(FIELD_VOID, "Enable", InputEnable),
	DEFINE_INPUTFUNC(FIELD_VOID, "Disable", InputDisable),
END_DATADESC()

/////////////////////////////////////////////////////////////////////////////
CHajSpawnPoint::CHajSpawnPoint()
{
	m_bEnabled = true;
}

/////////////////////////////////////////////////////////////////////////////
void CHajSpawnPoint::InputEnable(inputdata_t& inputdata)
{
	m_bEnabled = true;
}

/////////////////////////////////////////////////////////////////////////////
void CHajSpawnPoint::InputDisable(inputdata_t& inputdata)
{
	m_bEnabled = false;
}

/////////////////////////////////////////////////////////////////////////////
void CHajSpawnPoint::InputToggle(inputdata_t& inputdata)
{
	m_bEnabled = !m_bEnabled;
}

/////////////////////////////////////////////////////////////////////////////
void CHajSpawnPoint::OnPlayerSpawn(CBasePlayer* pPlayer)
{
	m_eOnPlayerSpawn.FireOutput(pPlayer, this);
}

/////////////////////////////////////////////////////////////////////////////
void CHajSpawnPoint::Spawn()
{
	m_bEnabled = !HasSpawnFlags(SF_START_DISABLED);
}
